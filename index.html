<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Estudos - Acesso</title>
    <style>
        :root { --primary: #1e3c72; --secondary: #2a5298; --accent: #00d2ff; --white: #ffffff; }
        body { font-family: 'Segoe UI', sans-serif; background: linear-gradient(135deg, var(--primary), var(--secondary)); color: #333; margin: 0; display: flex; align-items: center; justify-content: center; min-height: 100vh; }
        .card { background: var(--white); border-radius: 15px; padding: 30px; box-shadow: 0 10px 25px rgba(0,0,0,0.3); width: 100%; max-width: 400px; }
        .main-content { max-width: 1000px; display: none; grid-template-columns: 1fr 1fr; gap: 20px; width: 95%; margin: 20px auto; }
        
        input { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; }
        button { width: 100%; padding: 12px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; transition: 0.3s; margin-top: 10px; }
        .btn-primary { background: var(--primary); color: white; }
        .btn-link { background: none; color: var(--secondary); text-decoration: underline; font-size: 0.9rem; }

        /* Estilos do Painel (ap칩s login) */
        .panel-card { background: white; padding: 20px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .timer-display { font-size: 3rem; font-weight: bold; text-align: center; color: #e74c3c; }
        .site-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px; }
        .btn-site { padding: 10px; border-radius: 8px; color: white; text-align: center; text-decoration: none; font-size: 12px; font-weight: bold; }
        
        @media (max-width: 768px) { .main-content { grid-template-columns: 1fr; } }
    </style>
</head>
<body>

<div id="login-screen" class="card">
    <h2 id="auth-title">Entrar no Sistema</h2>
    <input type="text" id="username" placeholder="Usu치rio">
    <input type="password" id="password" placeholder="Senha">
    <button class="btn-primary" onclick="handleAuth()" id="auth-btn">ENTRAR</button>
    <button class="btn-link" onclick="toggleAuthMode()" id="toggle-btn">N칚o tem conta? Cadastre-se</button>
</div>

<div id="study-panel" class="main-content">
    <div class="panel-card">
        <h2>游 Ol치, <span id="user-display"></span>!</h2>
        <div class="site-grid">
            <a href="https://cursoenemgratuito.com.br/" target="_blank" onclick="startTimer()" class="btn-site" style="background:#27ae60">Enem Gratuito</a>
            <a href="https://www.respostacerta.com.br/" target="_blank" onclick="startTimer()" class="btn-site" style="background:#e74c3c">Resposta Certa</a>
            <a href="https://gemini.google.com/" target="_blank" onclick="startTimer()" class="btn-site" style="background:#10a37f">Gemini</a>
            <a href="https://www.estudesemfronteiras.com/" target="_blank" onclick="startTimer()" class="btn-site" style="background:#8e44ad">Sem Fronteiras</a>
        </div>
        <div class="timer-display" id="main-timer">00:00:00</div>
        <div style="display:flex; gap:10px; justify-content:center;">
            <button onclick="startTimer()" style="background:#2ecc71; color:white; width: 80px;">Play</button>
            <button onclick="pauseTimer()" style="background:#f39c12; color:white; width: 80px;">Pause</button>
        </div>
        <button class="btn-primary" style="margin-top:20px;" onclick="saveDay()">SALVAR DIA</button>
        <button class="btn-link" onclick="logout()">Sair do Sistema</button>
    </div>

    <div class="panel-card">
        <h2>游늰 Hist칩rico de Estudos</h2>
        <div id="history-display"></div>
    </div>
</div>

<script>
    let isLoginMode = true;
    let seconds = 0;
    let timerInterval = null;

    // --- SISTEMA DE LOGIN/CADASTRO ---
    function toggleAuthMode() {
        isLoginMode = !isLoginMode;
        document.getElementById('auth-title').innerText = isLoginMode ? "Entrar no Sistema" : "Criar Cadastro";
        document.getElementById('auth-btn').innerText = isLoginMode ? "ENTRAR" : "CADASTRAR";
        document.getElementById('toggle-btn').innerText = isLoginMode ? "N칚o tem conta? Cadastre-se" : "J치 tem conta? Fa칞a Login";
    }

    function handleAuth() {
        const user = document.getElementById('username').value;
        const pass = document.getElementById('password').value;

        if (!user || !pass) return alert("Preencha todos os campos!");

        if (isLoginMode) {
            const savedPass = localStorage.getItem(`user_${user}`);
            if (savedPass === pass) {
                showPanel(user);
            } else {
                alert("Usu치rio ou senha incorretos!");
            }
        } else {
            localStorage.setItem(`user_${user}`, pass);
            alert("Cadastro realizado! Agora fa칞a login.");
            toggleAuthMode();
        }
    }

    function showPanel(user) {
        document.getElementById('login-screen').style.display = 'none';
        document.getElementById('study-panel').style.display = 'grid';
        document.body.style.alignItems = 'flex-start';
        document.getElementById('user-display').innerText = user;
        renderHistory();
    }

    function logout() { location.reload(); }

    // --- SISTEMA DE ESTUDOS ---
    function startTimer() {
        if (!timerInterval) {
            timerInterval = setInterval(() => { seconds++; updateUI(); }, 1000);
        }
    }

    function pauseTimer() { clearInterval(timerInterval); timerInterval = null; }

    function updateUI() {
        const h = Math.floor(seconds / 3600).toString().padStart(2, '0');
        const m = Math.floor((seconds % 3600) / 60).toString().padStart(2, '0');
        const s = (seconds % 60).toString().padStart(2, '0');
        document.getElementById('main-timer').innerText = `${h}:${m}:${s}`;
    }

    function saveDay() {
        const entry = {
            date: new Date().toLocaleDateString('pt-BR'),
            time: document.getElementById('main-timer').innerText
        };
        let history = JSON.parse(localStorage.getItem('hist_estudos') || "[]");
        history.unshift(entry);
        localStorage.setItem('hist_estudos', JSON.stringify(history));
        alert("Salvo!");
        renderHistory();
    }

    function renderHistory() {
        const history = JSON.parse(localStorage.getItem('hist_estudos') || "[]");
        document.getElementById('history-display').innerHTML = history.map(item => `
            <div style="background:#f9f9f9; padding:10px; margin-bottom:5px; border-radius:5px; border-left:4px solid #00d2ff">
                <b>${item.date}</b>: ${item.time}
            </div>
        `).join('');
    }
</script>
</body>
</html>
