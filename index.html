<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meu Monitor de Estudos Avan√ßado</title>
    <style>
        :root { --primary: #1e3c72; --secondary: #2a5298; --accent: #00d2ff; --white: #ffffff; }
        body { font-family: 'Segoe UI', sans-serif; background: linear-gradient(135deg, var(--primary), var(--secondary)); color: #333; margin: 0; padding: 20px; min-height: 100vh; }
        .container { max-width: 1100px; margin: auto; display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .card { background: var(--white); border-radius: 15px; padding: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.3); }
        h2 { color: var(--primary); border-bottom: 2px solid #eee; padding-bottom: 10px; margin-top: 0; }
        
        /* BOT√ïES DE SITES */
        .site-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px; }
        .btn-site { padding: 12px; text-decoration: none; color: white; border-radius: 8px; text-align: center; font-weight: bold; font-size: 13px; transition: 0.3s; cursor: pointer; border: none; }
        .bg-enem { background-color: #27ae60; }
        .bg-resposta { background-color: #e74c3c; }
        .bg-ai { background-color: #10a37f; }
        .bg-extra { background-color: #8e44ad; }

        /* MONITOR DE TEMPO */
        .stats-list { list-style: none; padding: 0; }
        .stats-item { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #eee; }
        
        textarea { width: 100%; height: 150px; border-radius: 10px; padding: 10px; box-sizing: border-box; resize: none; border: 1px solid #ddd; }
        .timer-display { font-size: 2.5rem; font-weight: bold; text-align: center; color: #e74c3c; margin: 10px 0; }
        
        @media (max-width: 768px) { .container { grid-template-columns: 1fr; } }
    </style>
</head>
<body>

<div class="container">
    <div class="card">
        <h2>üöÄ Iniciar Estudo</h2>
        <p>Clique no site para abrir e come√ßar a contar o tempo:</p>
        <div class="site-grid">
            <button onclick="trackSite('Enem Gratuito', 'https://cursoenemgratuito.com.br/')" class="btn-site bg-enem">Enem Gratuito</button>
            <button onclick="trackSite('Resposta Certa', 'https://www.respostacerta.com.br/')" class="btn-site bg-resposta">Resposta Certa</button>
            <button onclick="trackSite('ChatGPT', 'https://chatgpt.com/')" class="btn-site bg-ai">ChatGPT</button>
            <button onclick="trackSite('Gemini', 'https://gemini.google.com/')" class="btn-site bg-ai">Gemini</button>
        </div>

        <div class="timer-display" id="main-timer">00:00:00</div>
        <div style="text-align:center;">
            <button onclick="pauseStudy()" style="padding:10px 20px; border-radius:5px; background:#f39c12; color:white; border:none; cursor:pointer; font-weight:bold;">PAUSAR TUDO</button>
            <button onclick="resetDailyStats()" style="margin-left:10px; color:#666; background:none; border:none; cursor:pointer; text-decoration:underline;">Zerar Relat√≥rio do Dia</button>
        </div>
    </div>

    <div class="card">
        <h2>üìä Relat√≥rio de Hoje</h2>
        <div id="stats-container">
            <ul class="stats-list" id="stats-list">
                </ul>
        </div>
        
        <h2 style="margin-top:20px;">‚úçÔ∏è Resumo do Aprendizado</h2>
        <textarea id="daily-summary" placeholder="O que voc√™ aprendeu hoje? Como foi seu desempenho em Matem√°tica e Portugu√™s?"></textarea>
    </div>
</div>

<script>
    let currentSite = null;
    let startTime = null;
    let stats = JSON.parse(localStorage.getItem('study_stats')) || {};

    // Fun√ß√£o para abrir o site e come√ßar a contar o tempo
    function trackSite(name, url) {
        saveCurrentTime(); // Salva o tempo do site anterior, se houver
        currentSite = name;
        startTime = Date.now();
        window.open(url, '_blank');
        updateDisplay();
    }

    function saveCurrentTime() {
        if (currentSite && startTime) {
            const elapsed = Math.floor((Date.now() - startTime) / 1000);
            stats[currentSite] = (stats[currentSite] || 0) + elapsed;
            localStorage.setItem('study_stats', JSON.stringify(stats));
            startTime = Date.now(); // Reseta o in√≠cio para a pr√≥xima contagem
            updateDisplay();
        }
    }

    function pauseStudy() {
        saveCurrentTime();
        currentSite = null;
        startTime = null;
    }

    function updateDisplay() {
        const list = document.getElementById('stats-list');
        list.innerHTML = '';
        let total = 0;

        for (const site in stats) {
            total += stats[site];
            const item = document.createElement('li');
            item.className = 'stats-item';
            item.innerHTML = `<span>${site}</span> <b>${formatTime(stats[site])}</b>`;
            list.appendChild(item);
        }
        document.getElementById('main-timer').innerText = formatTime(total);
    }

    function formatTime(seconds) {
        const h = Math.floor(seconds / 3600).toString().padStart(2, '0');
        const m = Math.floor((seconds % 3600) / 60).toString().padStart(2, '0');
        const s = (seconds % 60).toString().padStart(2, '0');
        return `${h}:${m}:${s}`;
    }

    function resetDailyStats() {
        if(confirm("Deseja zerar os tempos de hoje?")) {
            stats = {};
            localStorage.removeItem('study_stats');
            updateDisplay();
        }
    }

    // Salva o resumo de texto
    const summary = document.getElementById('daily-summary');
    summary.value = localStorage.getItem('study_summary') || '';
    summary.addEventListener('input', () => localStorage.setItem('study_summary', summary.value));

    // Atualiza a cada segundo se houver um site ativo
    setInterval(() => {
        if (currentSite && startTime) {
            updateDisplay();
        }
    }, 1000);

    updateDisplay();
</script>

</body>
</html>
